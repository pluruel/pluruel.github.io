---
layout: post
title:  "Clean Code 5-10"
date:   2019-07-18 22:42:10 +0900
categories: 
---
# 10. 클래스

### 단일 책임 원칙

쪼개고 쪼개고 쪼개라

### private method

private method는 잠재적인 리팩토링 대상일 가능성이 높다.

### 결합도는 낮게, 메소드는 추상적이게

의존역전을 훌륭하게 성취할 수 있다

# 11. 시스템

### DI

Class를 만드는 쪽과 사용하는 쪽을 분리하는것이 목적

### 모든 상황을 설계할 필요는 없다

SW개발은 건축과 달리 "경제적"으로 설계변경을 이룰 수 있다.

### 좋은 API는 걸리적 거리지 않아야 한다.

그래야 팀이 사용자 스토리에 맞춰 작업할 수 있다.

### 구현 관심사의 분리

관심사가 적절히 분리되어 잘 된 모듈화는 개발의 기민함을 가져온다.

# 12. 창발성

### 규칙
1. 모든 테스트를 없앤다.
1. 중복을 없앤다
1. 프로그래머의 의도를 표현한다
1. 클래스와 메소드수를 최소화한다.

### TC가 많아지면 결합도가 낮아질 수 밖에없다
추상화하여 테스트를 해야하기 때문.

### 중복 제거
Template Method

### 명백한 코드 만들기
1. 좋은 이름 선택
1. 함수와 클래스 크기 줄이기
1. 표준 명칭 사용
1. TC를 상세하게
1. 노렦!

### 클래스와 메소드 수 줄이기
제시한 대부분의 리팩토링 방법은 클래스와 메소드 수가 늘어남
그러나 실용적으로 해 나갈 필요가 있다.
경험!

# 13 .동시성
- 동시성은 때로 성능을 높여준다
- 단일과 다중스레드는 설계가 다르다
- 부하를 유발한다 코드도 더 짜야한다
- 복잡하다
- 버그재현이 어렵다
- 근본적인 설계전략을 다시 짤 필요가있다

### 동시성 코드는 다른 코드와 분리하라

### 자료를 캡슐화 하라
공유자료를 줄이고 싱크로나이즈드를 줄일 수 있는 전략을 세워야 한다

### 자료보단 자료 사본 (clone() 등)을 이용
잠그는것 보다 사본이 나을 수 있다.

### 생산자, 소비자
중간에 큐를 하나 두어 한 쪽 에서는 큐에 넣기만하고 다른 쪽에서는 큐에서 빼기만 하는 역할

### 읽기 쓰기
전부 읽은 후 쓰기에 들어간다-> 항상 그러면 쓰기가 기아에 들어갈 수 있으므로 주의

### 공유객체 하나에는 메소드를 하나만 사용하라
여러개가 생길 경우 어디서 락을 걸지 좋은 결정을 내려야 한다.

### 종료코드는 구현하기 쉽지않다
개발 초기(설계)부터 확실한 탈출코드의 구현이 필수적.

### 다중 스레드를 고려하지 않은 코드부터 테스트
그리고 섞어서 테스트하지 마라.

### 프로세서 수보다 많은 수의 스레드를 돌릴것
시스템이 스레드를 스와핑 할때도 문제가 생길 수 있다

### 멀티스레딩 개발환경은 잠재적인 위험을 가지고 있다

언제터질지 모르고 확실하게 알 수가없기 때문에 정교하게 테스트하라.